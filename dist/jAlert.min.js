(function(b){if(!Date.now){Date.now=function(){return +new Date()}}b.fn.jAlert=function(q){b("body").focus();b("body").blur();var k=["default","green","dark_green","red","dark_red","black","brown","gray","dark_gray","blue","dark_blue","yellow"],p=["xsm","sm","md","lg","xlg","full","auto"],h={xsmall:"xsm",small:"sm",medium:"md",large:"lg",xlarge:"xlg"},d=["white","black"],n=[],c=["animated"],o=[];if(this.length>1){this.each(function(){b.fn.jAlert(q)});return this}if(typeof b(this)[0]!="undefined"){if(b(this)[0]["jAlert"]!="undefined"){return b(this)[0]["jAlert"]}}b.each(b.fn.jAlert.defaults,function(s,t){var r=s.toLowerCase();if(typeof q[r]!=="undefined"){q[s]=q[r]}});q=b.extend({},b.fn.jAlert.defaults,q);if(!q.id){var g=Date.now().toString()+Math.floor(Math.random()*100000);var j="ja_"+g}else{var j=q.id}var i={set:function(r,s){i[r]=s;return i},__set:function(r,s){return i.set(r,s)},get:function(r){return i[r]},__get:function(r){return i.get(r)},centerAlert:function(){var r=b(window).height(),u=i.instance.height(),t=r-u;var s=t/2;s=s>200?s-100:s;s=s<=0?0:s;s=s-1;i.instance.css("margin-top",s+"px");i.instance.css("margin-bottom","0px");b("body").css("overflow","hidden");if(t>5){i.instance.parents(".ja_wrap").css("position","fixed")}else{i.instance.parents(".ja_wrap").css("position","absolute");b("html, body").animate({scrollTop:top-50},200)}return i},animateAlert:function(r){if(r=="hide"){if(i.instance.jAlert().blurBackground){b("body").removeClass("ja_blur")}i.instance.removeClass(i.showAnimation).addClass(i.hideAnimation)}else{if(i.instance.jAlert().blurBackground){b("body").addClass("ja_blur")}i.centerAlert();i.instance.addClass(i.showAnimation).removeClass(i.hideAnimation).show()}return i},closeAlert:function(r,s){if(r!=false){r=true}if(i.instance){i.instance.unbind("DOMSubtreeModified");i.animateAlert("hide");window.setTimeout(function(){var t=i.instance.parents(".ja_wrap");if(r){t.remove()}else{t.hide()}if(typeof s=="function"){s(i.instance)}else{if(typeof i.onClose=="function"){i.onClose(i.instance)}}if(b(".jAlert:visible").length>0){b(".jAlert:visible:last").jAlert().centerAlert()}else{b("body").css("overflow","auto")}},i.animationTimeout)}return i},showAlert:function(t,v,s,r){if(t!=false){t=true}if(v!==false){v=true}if(t){b(".jAlert:visible").jAlert().closeAlert(v)}var u=i.instance.parents(".ja_wrap");b("body").append(u);i.animateAlert("show");if(typeof r=="function"){i.onClose=r}window.setTimeout(function(){if(typeof s=="function"){s(i.instance)}},i.animationTimeout);return i}};b.each(q,function(r,s){i.set(r,s)});i.set("id",j);if(i.content&&i.content.indexOf("#")===0){if(b(i.content).length>0){i.content=b(i.content).html()}}if(i.video&&i.video.indexOf("youtube.com/watch?v=")>-1&&i.video.indexOf("embed")===-1){i.video=i.video.replace("watch?v=","embed/")}if(i.type=="confirm"){if(!i.content){i.content=i.confirmQuestion}i.btns=[{text:i.confirmBtnText,theme:"green","class":"confirmBtn",closeAlert:true,onClick:i.onConfirm},{text:i.denyBtnText,theme:"red","class":"denyBtn",closeAlert:true,onClick:i.onDeny}];i.autofocus=i.confirmAutofocus}if(i.color){i.theme=i.color}if(b.inArray(i.theme,k)==-1){console.log("jAlert Config Error: Invalid theme selection.");return false}c.push("ja_"+i.theme);if(i["class"]){c.push(i["class"])}if(i.classes){c.push(i.classes)}if(i.fullscreen){c.push("ja_fullscreen")}if(i.noPadContent){c.push("ja_no_pad")}if(!i.title){c.push("ja_noTitle")}if(i.width){i.size=i.width}if(i.size&&((typeof i.size=="object"&&(typeof i.size.width=="undefined"||typeof i.size.height=="undefined")))){console.log("jAlert Config Error: Invalid size selection (try a preset or make sure you're including height and width in your size object).");return false}else{if(!i.size){c.push("ja_sm")}else{if(typeof i.size=="object"){n.push("width: "+i.size.width+";");n.push("height: "+i.size.height+";");c.push("ja_setheight")}else{if(typeof h[i.size]!=="undefined"){i.size=h[i.size]}if(b.inArray(i.size,p)>-1){c.push("ja_"+i.size)}else{n.push("width: "+i.size+";")}}}}if(b.inArray(i.backgroundColor,d)==-1){console.log("jAlert Config Error: Invalid background color selection.");return false}o.push("ja_wrap_"+i.backgroundColor);i.onOpen=[i.onOpen];var e="onload='$.fn.jAlert.mediaLoaded($(this))'",l="<div class='ja_loader'>Loading...</div>";if(i.picture){i.image=i.picture}if(i.image){i.content="<div class='ja_media_wrap'>"+l+"<img src='"+i.image+"' class='ja_img' "+e+"'";if(i.imageWidth){i.content+=" style='width: "+i.imageWidth+"'"}i.content+="></div>"}else{if(i.video){i.content="<div class='ja_media_wrap'>"+l+"<div class='ja_video'></div></div>";i.onOpen.unshift(function(s){var r=document.createElement("iframe");r.src=s.jAlert().video;if(r.addEventListener){r.addEventListener("load",function(){b.fn.jAlert.mediaLoaded(b(this))},true)}else{if(r.attachEvent){r.attachEvent("onload",function(){b.fn.jAlert.mediaLoaded(b(this))})}else{r.onload=function(){b.fn.jAlert.mediaLoaded(b(this))}}}s.find(".ja_video").append(r)})}else{if(i.iframe){if(!i.iframeHeight){i.iframeHeight=b(window).height()+"px"}i.content="<div class='ja_media_wrap'>"+l+"</div>";i.onOpen.unshift(function(s){var r=document.createElement("iframe");r.src=s.jAlert().iframe;r.className="ja_iframe";if(r.addEventListener){r.addEventListener("load",function(){b.fn.jAlert.mediaLoaded(b(this))},true)}else{if(r.attachEvent){r.attachEvent("onload",function(){b.fn.jAlert.mediaLoaded(b(this))})}else{r.onload=function(){b.fn.jAlert.mediaLoaded(b(this))}}}s.find(".ja_media_wrap").append(r)})}else{if(i.ajax){i.content="<div class='ja_media_wrap'>"+l+"</div>";onAjaxCallbacks=i.onOpen;i.onOpen=[function(r){b.ajax(r.jAlert().ajax,{async:true,complete:function(s,t){r.find(".ja_media_wrap").replaceWith(s.responseText);b.each(onAjaxCallbacks,function(u,v){v(r)})},error:function(s,u,t){i.onAjaxFail(r,"Error getting content: Code: "+s.status+" : Msg: "+s.statusText)}})}]}}}}var f=function(r){if(typeof r.href=="undefined"){r.href=""}if(typeof r["class"]=="undefined"){r["class"]=""}if(typeof r.theme=="undefined"){r["class"]+=" ja_btn_default"}else{r["class"]+=" ja_btn_"+r.theme}if(typeof r.text=="undefined"){r.text=""}if(typeof r.id=="undefined"){var s=Date.now().toString()+Math.floor(Math.random()*100000);r.id="ja_btn_"+s}if(typeof r.target=="undefined"){r.target="_self"}if(typeof r.closeAlert=="undefined"){r.closeAlert=true}b("body").off("click","#"+r.id);b("body").on("click","#"+r.id,function(v){var t=b(this);if(r.closeAlert){t.parents(".jAlert").jAlert().closeAlert()}var u=true;if(typeof r.onClick=="function"){u=r.onClick(v,t)}if(!u||r.closeAlert){v.preventDefault();return false}return u});return"<a href='"+r.href+"' id='"+r.id+"' target='"+r.target+"' class='ja_btn "+r["class"]+"'>"+r.text+"</a> "};var m=function(t){var s="";s+='<div class="ja_wrap '+o.join(" ")+'"><div class="jAlert '+c.join(" ")+'" style="'+n.join(" ")+'" id="'+i.id+'"><div>';if(i.closeBtn){s+="<div class='closejAlert ja_close";if(i.closeBtnAlt){s+=" ja_close_alt"}else{if(i.closeBtnRoundWhite){s+=" ja_close_round_white"}else{if(i.closeBtnRound){s+=" ja_close_round"}}}s+="'>&times;</div>"}if(i.title){s+="<div class='ja_title'><div>"+i.title+"</div></div>"}s+='<div class="ja_body">'+t;if(i.btns){s+='<div class="ja_btn_wrap ';if(i.btnBackground){s+="optBack"}s+='">'}if(typeof i.btns[0]=="object"){b.each(i.btns,function(v,w){if(typeof w=="object"){s+=f(w)}})}else{if(typeof i.btns=="object"){s+=f(i.btns)}else{if(i.btns){console.log("jAlert Config Error: Incorrect value for btns (must be object or array of objects): "+i.btns)}}}if(i.btns){s+="</div>"}s+="</div></div></div></div>";var r=b(s);if(i.replaceOtherAlerts){var u=b(".jAlert:visible");u.each(function(){b(this).jAlert().closeAlert()})}b("body").append(r);i.instance=b("#"+i.id);i.instance[0]["jAlert"]=i;b("body").css("overflow","hidden");i.animateAlert("show");if(i.closeBtn){i.instance.on("click",".closejAlert",function(v){v.preventDefault();b(this).parents(".jAlert:first").jAlert().closeAlert();return false})}if(i.closeOnClick){b(document).off("mouseup touchstart",b.fn.jAlert.onMouseUp);b(document).on("mouseup touchstart",b.fn.jAlert.onMouseUp)}if(i.closeOnEsc){b(document).off("keydown",b.fn.jAlert.onEscKeyDown);b(document).on("keydown",b.fn.jAlert.onEscKeyDown)}if(i.onOpen){b.each(i.onOpen,function(w,v){v(i.instance)})}if(i.autofocus){i.instance.find(i.autofocus).focus()}else{i.instance.focus()}if(i.autoClose){setTimeout(function(){var v=b.jAlert("current");if(v!==false){v.closeAlert()}},i.autoClose)}i.instance.bind("DOMSubtreeModified",function(){i.centerAlert()});return i.instance};this.initialize=function(){if(!i.content&&!i.image&&!i.video&&!i.iframe&&!i.ajax){console.log("jAlert potential error: No content defined");return m("")}else{if(!i.content){i.content=""}return m(i.content)}};this.initialize();return i};b.fn.jAlert.defaults={title:false,content:false,noPadContent:false,fullscreen:false,image:false,imageWidth:"auto",video:false,ajax:false,onAjaxFail:function(d,c){d.jAlert().closeAlert();errorAlert(c)},iframe:false,iframeHeight:false,"class":"",classes:"",id:false,showAnimation:"fadeInUp",hideAnimation:"fadeOutDown",animationTimeout:600,theme:"default",backgroundColor:"black",blurBackground:false,size:false,replaceOtherAlerts:false,closeOnClick:false,closeOnEsc:true,closeBtn:true,closeBtnAlt:false,closeBtnRound:true,closeBtnRoundWhite:false,btns:false,autoClose:false,btnBackground:true,autofocus:false,onOpen:function(c){return false},onClose:function(c){return false},type:"modal",confirmQuestion:"Are you sure?",confirmBtnText:"Yes",denyBtnText:"No",confirmAutofocus:".confirmBtn",onConfirm:function(d,c){d.preventDefault();console.log("confirmed");return false},onDeny:function(d,c){d.preventDefault();return false}};b.fn.jAlert.onMouseUp=function(f){var d=f.target?f.target:f.srcElement;var c=b(".jAlert:visible:last");if(c.length>0&&c.jAlert().closeOnClick){if(!b(d).is(".jAlert *")){c.jAlert().closeAlert()}}};b.fn.jAlert.onEscKeyDown=function(d){if(d.keyCode===27){var c=b(".jAlert:visible:last");if(c.length>0&&c.jAlert().closeOnEsc){c.jAlert().closeAlert()}}};b.fn.attachjAlert=function(c){c.preventDefault();b.jAlert(b(this).data());return false};b.jAlert=function(d){if(d=="current"){var c=b(".jAlert:visible:last");if(c.length>0){return c.jAlert()}return false}if(d=="attach"){b("[data-jAlert]").off("click",b.fn.attachjAlert);b("[data-jAlert]").on("click",b.fn.attachjAlert);b("[data-jalert]").off("click",b.fn.attachjAlert);b("[data-jalert]").on("click",b.fn.attachjAlert);return false}return b.fn.jAlert(d)};b.fn.alertOnClick=function(c){b(this).on("click",function(d){d.preventDefault();b.jAlert(c);return false})};b.alertOnClick=function(c,d){b("body").on("click",c,function(f){f.preventDefault();b.jAlert(d);return false})};b.fn.closeAlert=function(c,d){b(this).jAlert().closeAlert(c,d)};var a;b(window).resize(function(){window.clearTimeout(a);a=window.setTimeout(function(){b(".jAlert:visible").each(function(){b(this).jAlert().centerAlert()})},200)});b.fn.jAlert.mediaLoaded=function(f){var e=f.parents(".ja_media_wrap"),c=e.find(".ja_video"),g=f.parents(".jAlert:first"),d=g.jAlert();e.find(".ja_loader").remove();if(c.length>0){c.fadeIn("fast")}else{f.fadeIn("fast")}if(typeof d.iframeHeight!=="undefined"&&d.iframeHeight){f.css("display","block");f.height(d.iframeHeight)}d.centerAlert()}})(jQuery);