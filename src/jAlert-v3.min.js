/* 
	*
	*
	jAlert v.3
	Made with love by Versatility Werks (http://flwebsites.biz)
	MIT Licensed
	*
	*
*/
!function(o){o.fn.jAlert=function(n){var t=this,e=["default","green","red","black","blue","yellow"],i=["xsm","sm","md","lg","xlg","full"],s=["white","black"],a=[],r=["animated"],c=[];if(t.length>1)return t.each(function(){o(this).jAlert(t.options)}),this;if(t.options=o.extend({},o.fn.jAlert.defaults,n),t.instance=!1,"confirm"==t.options.type&&(t.options.content||(t.options.content=t.options.confirmQuestion),t.options.btns=[{text:t.options.confirmBtnText,theme:"green","class":"confirmBtn",closeAlert:!0,onClick:t.options.onConfirm},{text:t.options.denyBtnText,theme:"red","class":"denyBtn",closeAlert:!0,onClick:t.options.onDeny}],t.options.autofocus=t.options.confirmAutofocus),-1==o.inArray(t.options.theme,e))return console.log("jAlert Config Error: Invalid theme selection."),!1;if(r.push("ja_"+t.options.theme),!t.options.id){var l=Date.now().toString()+Math.floor(1e5*Math.random());t.options.id="ja_"+l}if(t.options["class"]&&r.push(t.options["class"]),t.options.classes&&r.push(t.options.classes),t.options.title||r.push("ja_noTitle"),t.options.size&&("string"==typeof t.options.size&&-1==o.inArray(t.options.size,i)||"object"==typeof t.options.size&&("undefined"==typeof t.options.size.width||"undefined"==typeof t.options.size.height)))return console.log("jAlert Config Error: Invalid size selection (try a preset or make sure you're including height and width in your size object)."),!1;if(t.options.size?"object"==typeof t.options.size?(a.push("width: "+t.options.size.width+";"),a.push("height: "+t.options.size.height+";")):r.push("ja_"+t.options.size):r.push("ja_sm"),-1==o.inArray(t.options.backgroundColor,s))return console.log("jAlert Config Error: Invalid background color selection."),!1;c.push("ja_wrap_"+t.options.backgroundColor),("object"==typeof t.options.btns||"array"==typeof t.options.btns||t.options.autofocus)&&(t.options.closeOnClick=!1),t.options.onOpen=[t.options.onOpen];var p="onload='$.fn.jAlert.mediaLoaded($(this))'",d="<div class='ja_loader'>Loading...</div>";t.options.image?(t.options.content="<div class='ja_media_wrap'>"+d+"<img src='"+t.options.image+"' class='ja_img' "+p+"'",t.options.imageWidth&&(t.options.content+=" style='width: "+t.options.imageWidth+"'"),t.options.content+="></div>"):t.options.video?(t.options.content="<div class='ja_media_wrap'>"+d+"<div class='ja_video'></div></div>",t.options.onOpen.unshift(function(n){var t=document.createElement("iframe");t.src=n.options.video,t.attachEvent?t.attachEvent("onload",function(){o.fn.jAlert.mediaLoaded(o(this))}):t.onload=function(){o.fn.jAlert.mediaLoaded(o(this))},n.find(".ja_video").append(t)})):t.options.iframe?(t.options.iframeHeight||(t.options.iframeHeight=.9*o(window).height()+"px"),t.options.content="<div class='ja_media_wrap'>"+d+"</div>",t.options.onOpen.unshift(function(n){var t=document.createElement("iframe");t.src=n.options.iframe,t.height=n.options.iframeHeight,t.className="ja_iframe",t.attachEvent?t.attachEvent("onload",function(){o.fn.jAlert.mediaLoaded(o(this))}):t.onload=function(){o.fn.jAlert.mediaLoaded(o(this))},n.find(".ja_media_wrap").append(t)})):t.options.ajax&&(t.options.content="<div class='ja_media_wrap'>"+d+"</div>",onAjaxCallbacks=t.options.onOpen,t.options.onOpen=[function(n){o.ajax(n.options.ajax,{async:!0,complete:function(t){n.find(".ja_media_wrap").replaceWith(t.responseText),o.each(onAjaxCallbacks,function(o,t){t(n)})},error:function(o){n.options.onAjaxFail(n,"Error getting content: Code: "+o.status+" : Msg: "+o.statusText)}})}]),t.centerAlert=function(){var n=o(window).height(),e=t.instance.height(),i=n-e,s=i/2;s>200&&(s-=100),0>=s&&(s=0),t.instance.css("margin-top",s+"px"),o("body").css("overflow","hidden"),i>5?t.instance.parents(".ja_wrap").css("position","fixed"):(t.instance.parents(".ja_wrap").css("position","absolute"),o("html, body").animate({scrollTop:s-50},200))};var f=function(o,n){"hide"==o?n.removeClass(t.options.showAnimation).addClass(t.options.hideAnimation):(n.centerAlert(),n.addClass(t.options.showAnimation).removeClass(t.options.hideAnimation).show())},u=function(n){if("undefined"==typeof n.href&&(n.href=""),"undefined"==typeof n["class"]&&(n["class"]=""),n["class"]+="undefined"==typeof n.theme?" ja_btn_default":" ja_btn_"+n.theme,"undefined"==typeof n.text&&(n.text=""),"undefined"==typeof n.id){var t=Date.now().toString()+Math.floor(1e5*Math.random());n.id="ja_btn_"+t}return"undefined"==typeof n.target&&(n.target="_self"),"undefined"==typeof n.closeAlert&&(n.closeAlert=!0),o("body").on("click","#"+n.id,function(t){var e=o(this);n.closeAlert&&e.parents(".jAlert").closeAlert();var i=!0;return"function"==typeof n.onClick&&(i=n.onClick(t,e)),!i||n.closeAlert?(t.preventDefault(),!1):i}),"<a href='"+n.href+"' id='"+n.id+"' target='"+n.target+"' class='ja_btn "+n["class"]+"'>"+n.text+"</a> "};t.closeAlert=function(n,e){var i=o(this);return 0!=n&&(n=!0),i.length&&(i.unbind("DOMSubtreeModified"),f("hide",i),window.setTimeout(function(){var s=i.parents(".ja_wrap");n?s.remove():s.hide(),"function"==typeof e?e(i):"function"==typeof t.options.onClose&&t.options.onClose(i),o(".jAlert").length>0?o(".jAlert:last").centerAlert():o("body").css("overflow","auto")},t.options.animationTimeout)),this},t.showAlert=function(n,e,i,s){var a=o(this);0!=n&&(n=!0),e!==!1&&(e=!0),n&&o(".jAlert:visible").closeAlert(e);var r=a.parents(".ja_wrap");o("body").append(r),f("show",a),"function"==typeof s&&(t.options.onClose=s),window.setTimeout(function(){"function"==typeof i&&i(a)},t.options.animationTimeout)};var h=function(n){var e="";e+='<div class="ja_wrap '+c.join(" ")+'"><div class="jAlert '+r.join(" ")+'" style="'+a.join(" ")+'" id="'+t.options.id+'"><div>',t.options.closeBtn&&(e+="<div class='closejAlert ja_close",t.options.closeBtnAlt&&(e+=" ja_close_alt"),e+="'>X</div>"),t.options.title&&(e+="<div class='ja_title'><div>"+t.options.title+"</div></div>"),e+='<div class="ja_body">'+n,t.options.btns&&(e+='<div class="ja_btn_wrap ',t.options.btnBackground&&(e+="optBack"),e+='">'),"object"==typeof t.options.btns[0]?o.each(t.options.btns,function(o,n){"object"==typeof n&&(e+=u(n))}):"object"==typeof t.options.btns?e+=u(t.options.btns):t.options.btns&&console.log("jAlert Config Error: Incorrect value for btns (must be object or array of objects): "+t.options.btns),t.options.btns&&(e+="</div>"),e+="</div></div></div></div>";var i=o(e);return t.options.replaceOtherAlerts&&o(".jAlert:visible").closeAlert(),o("body").append(i),t.instance=o("#"+t.options.id),f("show",t.instance),t.options.closeBtn&&t.instance.on("click",".closejAlert",function(n){return n.preventDefault(),o(this).parents(".jAlert").closeAlert(),!1}),t.options.closeOnClick&&(o(document).off("mouseup",o.fn.jAlert.onMouseUp),o(document).on("mouseup",o.fn.jAlert.onMouseUp)),t.options.closeOnEsc&&(o(document).off("keydown",o.fn.jAlert.onEscKeyDown),o(document).on("keydown",o.fn.jAlert.onEscKeyDown)),t.options.onOpen&&o.each(t.options.onOpen,function(o,n){n(t.instance)}),t.options.autofocus&&t.instance.find(t.options.autofocus).focus(),t.instance.bind("DOMSubtreeModified",function(){t.instance.centerAlert()}),t.instance};return t.initialize=function(){return t.options.content||t.options.image||t.options.video||t.options.iframe||t.options.ajax?(t.options.content||(t.options.content=""),h(t.options.content)):(console.log("jAlert potential error: No content defined"),h(""))},t.initialize(),t},o.fn.jAlert.defaults={title:!1,content:!1,image:!1,imageWidth:"auto",video:!1,ajax:!1,onAjaxFail:function(o,n){o.closeAlert(),errorAlert(n)},iframe:!1,iframeHeight:!1,"class":"",classes:"",id:!1,showAnimation:"fadeInUp",hideAnimation:"fadeOutDown",animationTimeout:600,theme:"default",backgroundColor:"black",size:!1,replaceOtherAlerts:!1,closeOnClick:!1,closeOnEsc:!0,closeBtn:!0,closeBtnAlt:!1,btns:!1,btnBackground:!0,autofocus:!1,onOpen:function(){return!1},onClose:function(){return!1},type:"modal",confirmQuestion:"Are you sure?",confirmBtnText:"Yes",denyBtnText:"No",confirmAutofocus:".confirmBtn",onConfirm:function(o){return o.preventDefault(),console.log("confirmed"),!1},onDeny:function(o){return o.preventDefault(),!1}},o.fn.jAlert.onMouseUp=function(){var n=o(".jAlert:visible:last");n.options.closeOnClick&&n.closeAlert()},o.fn.jAlert.onEscKeyDown=function(n){if(27===n.keyCode){var t=o(".jAlert:visible:last");t.options.closeOnEsc&&t.closeAlert()}},o.jAlert=function(n){return o.fn.jAlert(n)},o.fn.alertOnClick=function(n){o(this).on("click",function(t){return t.preventDefault(),o.jAlert(n),!1})},o.alertOnClick=function(n,t){o("body").on("click",n,function(n){return n.preventDefault(),o.jAlert(t),!1})};var n;o(window).resize(function(){window.clearTimeout(n),n=window.setTimeout(function(){o(".jAlert:visible").each(function(){o(this).centerAlert()})},200)}),o.fn.jAlert.mediaLoaded=function(o){var n=o.parents(".ja_media_wrap"),t=n.find(".ja_video");n.find(".ja_loader").remove(),t.length>0?t.fadeIn("fast"):o.fadeIn("fast"),o.parents(".jAlert").centerAlert()}}(jQuery);